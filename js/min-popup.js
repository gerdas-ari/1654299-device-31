const popupButton=document.querySelector(".popup-button"),messagePopup=document.querySelector(".modal-message"),messageClose=messagePopup.querySelector(".close-button"),messageForm=messagePopup.querySelector(".message-form"),messageName=messagePopup.querySelector(".form-name"),messageEmail=messagePopup.querySelector(".form-email");let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("name")}catch(e){isStorageSupport=!1}popupButton.addEventListener("click",function(e){e.preventDefault(),messagePopup.classList.add("modal-show"),storage?(messageName.value=storage,messageEmail.focus()):messageName.focus(),messageName.focus()}),messageClose.addEventListener("click",function(e){e.preventDefault(),messagePopup.classList.remove("modal-show"),messagePopup.classList.remove("modal-error")}),messageForm.addEventListener("submit",function(e){messageName.value&&messageEmail.value?isStorageSupport&&localStorage.setItem("name",messageName.value):(e.preventDefault(),messagePopup.classList.remove("modal-error"),messagePopup.offsetWidth=messagePopup.offsetWidth,messagePopup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){"Esc"!==e.key&&"Escape"!==e.key||messagePopup.classList.contains("modal-show")&&(e.preventDefault(),messagePopup.classList.remove("modal-show"),messagePopup.classList.remove("modal-error"))});
